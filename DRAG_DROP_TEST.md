# 拖拽导入功能测试指南

## 功能说明

从系统文件夹（Finder/资源管理器）拖拽文件到项目资源管理器，实现快速导入。

## 支持的文件类型

| 文件类型 | 扩展名 | 目标文件夹 |
|---------|--------|-----------|
| 图片 | .png, .jpg, .jpeg | inputs/ |
| 视频 | .mp4, .avi, .mov | outputs/ |

## 测试场景

### 场景 1：单文件拖拽

**操作步骤：**
1. 打开工程
2. 从系统文件管理器选择一张图片（如 test.jpg）
3. 拖动到客户端的资源管理器区域
4. 松开鼠标

**预期结果：**
- ✅ 文件自动复制到 `inputs/` 文件夹
- ✅ 显示"图片文件已导入到工程"提示
- ✅ 资源管理器自动刷新
- ✅ 新文件立即显示在列表中

### 场景 2：批量文件拖拽

**操作步骤：**
1. 打开工程
2. 从系统文件管理器选择多个文件（如 5 张图片）
3. 一次性拖动到资源管理器
4. 松开鼠标

**预期结果：**
- ✅ 所有文件依次导入
- ✅ 显示导入结果统计：
  ```
  导入完成！
  
  成功: 5 个
  ```
- ✅ 资源管理器显示所有新文件

### 场景 3：文件覆盖确认

**操作步骤：**
1. 拖入一个已存在的文件（如 test.jpg）
2. 系统弹出确认对话框

**预期结果：**
- ✅ 显示"确认覆盖"对话框
- ✅ 提示文件名
- ✅ 选择"是"：覆盖文件
- ✅ 选择"否"：跳过导入

### 场景 4：混合类型文件

**操作步骤：**
1. 同时选择 3 张图片 + 2 个视频
2. 拖动到资源管理器

**预期结果：**
- ✅ 图片自动进入 `inputs/`
- ✅ 视频自动进入 `outputs/`
- ✅ 显示导入统计

### 场景 5：不支持的文件类型

**操作步骤：**
1. 拖入一个 .txt 或 .pdf 文件

**预期结果：**
- ✅ 显示警告："不支持的文件类型: .txt"
- ✅ 提示支持的格式列表
- ✅ 文件不会被导入

### 场景 6：未打开工程

**操作步骤：**
1. 关闭所有工程（显示欢迎页面）
2. 尝试拖拽文件

**预期结果：**
- ✅ 显示警告："请先打开工程"
- ✅ 文件不会被导入

## 批量导入统计

**当拖拽多个文件时，会显示总结：**

```
导入完成！

成功: 3 个
跳过: 1 个
失败: 1 个
```

**说明：**
- **成功**：成功导入的文件数
- **跳过**：用户选择不覆盖的文件数
- **失败**：导入失败的文件数（如格式不支持）

## 实际测试示例

### 示例 1：导入产品图片

```
准备：桌面上有 10 张产品图片
操作：全选 → 拖拽到资源管理器
结果：
  - 10 张图片全部进入 inputs/
  - 显示"成功: 10 个"
  - 可以立即使用这些图片生成视频
```

### 示例 2：整理素材库

```
准备：下载文件夹有 8 张图片 + 3 个视频
操作：全选 → 拖拽到资源管理器
结果：
  - 8 张图片 → inputs/
  - 3 个视频 → outputs/
  - 显示"成功: 11 个"
  - 文件自动分类
```

### 示例 3：更新现有文件

```
准备：inputs/ 中已有 logo.png
操作：从桌面拖入新的 logo.png
结果：
  - 弹出覆盖确认
  - 选择"是"后更新文件
  - 显示"图片文件已导入到工程"
```

## 使用技巧

### 提高效率

1. **批量导入**
   - 一次选择多个文件
   - 减少重复操作
   - 自动分类存储

2. **混合导入**
   - 可以同时拖入不同类型文件
   - 系统自动识别和分类
   - 无需手动整理

3. **覆盖控制**
   - 对每个重复文件单独确认
   - 灵活控制是否更新
   - 避免误操作

### 注意事项

1. **工程状态**
   - ❌ 未打开工程时无法导入
   - ✅ 必须先创建或打开工程

2. **文件格式**
   - ❌ 不支持 PSD、AI 等设计文件
   - ✅ 先导出为 JPG/PNG

3. **文件大小**
   - ⚠️ 大文件（>10MB）可能较慢
   - ✅ 建议压缩后导入

4. **文件夹**
   - ❌ 不支持拖入文件夹
   - ✅ 只支持单个文件

## 故障排除

### 问题 1：拖拽无反应

**症状：** 拖拽文件到资源管理器没有任何反应

**可能原因：**
1. 未打开工程
2. 拖到了错误的位置

**解决方法：**
1. 确认已打开工程
2. 拖到资源管理器区域（左侧）
3. 确保鼠标松开在资源管理器内

### 问题 2：文件未出现

**症状：** 导入成功但文件列表中看不到

**解决方法：**
1. 点击资源管理器的刷新按钮（⟳）
2. 或重新打开工程

### 问题 3：导入失败

**症状：** 显示"导入失败"错误

**可能原因：**
1. 磁盘空间不足
2. 文件权限问题
3. 文件正被其他程序占用

**解决方法：**
1. 检查磁盘空间
2. 检查文件是否可读
3. 关闭占用文件的程序

## 与其他功能配合

### 配合图片查看器

```
1. 从桌面拖入图片
2. 双击查看预览
3. 确认无误后使用
```

### 配合视频播放

```
1. 从其他位置拖入视频
2. 双击播放查看
3. 归档到工程中
```

### 完整工作流

```
1. 准备素材：拖拽图片到资源管理器
2. 预览确认：双击查看图片
3. 选择图片：双击加载到上传区
4. 配置参数：设置提示词等
5. 生成视频：点击生成
6. 查看结果：双击播放视频
7. 导出归档：使用右键菜单
```

## 快捷操作对照表

| 操作 | 传统方式 | 拖拽方式 | 提升 |
|------|---------|---------|------|
| 导入 1 个文件 | 4 步 | 1 步 | 75% |
| 导入 10 个文件 | 40 步 | 1 步 | 97.5% |
| 分类文件 | 手动 | 自动 | 100% |

## 测试检查清单

完成测试后，请确认：

- [ ] 单文件拖拽成功
- [ ] 批量文件拖拽成功
- [ ] 文件覆盖确认正常
- [ ] 图片自动进入 inputs/
- [ ] 视频自动进入 outputs/
- [ ] 不支持格式正确拒绝
- [ ] 未开工程正确提示
- [ ] 批量导入统计准确
- [ ] 资源管理器自动刷新
- [ ] 导入后文件可用

---

**版本**: v1.3.0+  
**测试日期**: 2025-12-11  
**功能状态**: ✅ 已实现并测试
