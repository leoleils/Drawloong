# ä¸‡ç›¸2.6 å›¾åƒç¼–è¾‘æ¨¡å‹å¿«é€ŸæŒ‡å—

## ğŸŒŸ æ¨¡å‹ç‰¹æ€§

ä¸‡ç›¸2.6å›¾åƒç¼–è¾‘ï¼ˆwan2.6-imageï¼‰æ˜¯æœ€æ–°çš„å›¾åƒç”Ÿæˆä¸ç¼–è¾‘æ¨¡å‹ï¼Œæä¾›å¼ºå¤§çš„å›¾åƒå¤„ç†èƒ½åŠ›ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **å‚è€ƒå›¾ç”Ÿå›¾**ï¼šæ ¹æ®å‚è€ƒå›¾çš„é£æ ¼ç”Ÿæˆæ–°å›¾ç‰‡
- **å›¾æ–‡æ··åˆè¾“å‡º**ï¼šç”ŸæˆåŒ…å«æ–‡å­—å’Œå›¾ç‰‡çš„æ··åˆå†…å®¹
- **å¤šå›¾ç¼–è¾‘**ï¼šæ”¯æŒå¤šå¼ å›¾ç‰‡è¾“å…¥
- **å¼‚æ­¥å¤„ç†**ï¼šä½¿ç”¨å¼‚æ­¥APIï¼Œé€‚åˆæ‰¹é‡å¤„ç†

## ğŸ“‹ å‚æ•°è¯´æ˜

### æ¨¡å‹æ ‡è¯†
```
model: "wan2.6-image"
```

### APIæ¥å£

**å¼‚æ­¥è°ƒç”¨æ¥å£**ï¼š
```
https://dashscope.aliyuncs.com/api/v1/services/aigc/image-generation/generation
```

## ğŸ¯ ä½¿ç”¨æ¨¡å¼

### 1. å‚è€ƒå›¾ç”Ÿå›¾æ¨¡å¼

æ ¹æ®å‚è€ƒå›¾çš„é£æ ¼ç”Ÿæˆæ–°å›¾ç‰‡ã€‚

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "model": "wan2.6-image",
  "input": {
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "text": "å‚è€ƒè¿™ä¸ªé£æ ¼çš„å›¾ç‰‡ï¼Œç”Ÿæˆç•ªèŒ„ç‚’è›‹"
          },
          {
            "image": "https://example.com/reference.png"
          }
        ]
      }
    ]
  },
  "parameters": {
    "n": 2,
    "size": "1280*1280",
    "prompt_extend": true,
    "watermark": false,
    "negative_prompt": ""
  }
}
```

**ç‰¹ç‚¹**ï¼š
- æä¾›å‚è€ƒå›¾ç‰‡URLæˆ–base64
- æ¨¡å‹ä¼šå­¦ä¹ å‚è€ƒå›¾çš„é£æ ¼
- æ ¹æ®æ–‡å­—æè¿°ç”Ÿæˆæ–°å›¾ç‰‡

### 2. å›¾æ–‡æ··åˆè¾“å‡ºæ¨¡å¼

ç”ŸæˆåŒ…å«æ–‡å­—è¯´æ˜å’Œå›¾ç‰‡çš„æ•™ç¨‹å¼å†…å®¹ã€‚

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "model": "wan2.6-image",
  "input": {
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "text": "ç»™æˆ‘ä¸€ä¸ª3å¼ å›¾è¾£æ¤’ç‚’è‚‰æ•™ç¨‹"
          }
        ]
      }
    ]
  },
  "parameters": {
    "n": 1,
    "size": "1280*1280",
    "enable_interleave": true,
    "max_images": 3
  }
}
```

**ç‰¹ç‚¹**ï¼š
- è®¾ç½® `enable_interleave=true` å¯ç”¨
- å¯ä»¥ç”Ÿæˆå¤šå¼ å›¾ç‰‡ï¼ˆæœ€å¤š5å¼ ï¼‰
- å›¾ç‰‡å’Œæ–‡å­—æ··åˆè¾“å‡º
- é€‚åˆæ•™ç¨‹ã€æ­¥éª¤è¯´æ˜ç­‰åœºæ™¯

### 3. å›¾åƒç¼–è¾‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

ç¼–è¾‘ç°æœ‰å›¾ç‰‡æˆ–å¤šå›¾èåˆã€‚

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "model": "wan2.6-image",
  "input": {
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "text": "å°†è¿™å¼ å›¾ç‰‡æ”¹æˆæ°´å½©ç”»é£æ ¼"
          },
          {
            "image": "data:image/jpeg;base64,..."
          }
        ]
      }
    ]
  },
  "parameters": {
    "n": 2,
    "size": "1280*1280",
    "prompt_extend": true,
    "enable_interleave": false
  }
}
```

## ğŸ“ å‚æ•°è¯¦è§£

### enable_interleave
- **ç±»å‹**ï¼šbool
- **é»˜è®¤å€¼**ï¼šfalse
- **è¯´æ˜**ï¼šæ§åˆ¶ç”Ÿå›¾æ¨¡å¼
  - `false`ï¼šå›¾åƒç¼–è¾‘æ¨¡å¼ï¼ˆæ”¯æŒå¤šå›¾è¾“å…¥ï¼‰
  - `true`ï¼šå›¾æ–‡æ··æ’è¾“å‡ºæ¨¡å¼ï¼ˆä»…æ”¯æŒä¸€å¼ å›¾æˆ–ä¸ä¼ å›¾ï¼‰

### prompt_extend
- **ç±»å‹**ï¼šbool
- **é»˜è®¤å€¼**ï¼štrue
- **è¯´æ˜**ï¼šæ˜¯å¦å¼€å¯promptæ™ºèƒ½æ”¹å†™
  - ä»…åœ¨ `enable_interleave=false` æ—¶ç”Ÿæ•ˆ
  - å¼€å¯åä¼šå¢åŠ 3-4ç§’è€—æ—¶
  - å¯¹ç®€å•promptæœ‰æ˜æ˜¾æå‡æ•ˆæœ

### n
- **ç±»å‹**ï¼šinteger
- **å–å€¼èŒƒå›´**ï¼š
  - `enable_interleave=true` æ—¶ï¼šå›ºå®šä¸º1
  - `enable_interleave=false` æ—¶ï¼š1~4å¼ 
- **é»˜è®¤å€¼**ï¼š4
- **è¯´æ˜**ï¼šç”Ÿæˆå›¾ç‰‡çš„æ•°é‡

### max_images
- **ç±»å‹**ï¼šinteger
- **å–å€¼èŒƒå›´**ï¼š1~5
- **é»˜è®¤å€¼**ï¼š5
- **è¯´æ˜**ï¼šä»…åœ¨å›¾æ–‡æ··åˆæ¨¡å¼ä¸‹ç”Ÿæ•ˆ
  - æŒ‡å®šæœ€å¤šç”Ÿæˆçš„å›¾åƒæ•°é‡
  - å®é™…æ•°é‡å¯èƒ½å°‘äºè®¾å®šå€¼

### size
- **ç±»å‹**ï¼šstring
- **æ ¼å¼**ï¼š`å®½*é«˜`
- **ç¤ºä¾‹**ï¼š`1280*1280`
- **è¯´æ˜**ï¼šç”Ÿæˆå›¾ç‰‡çš„å°ºå¯¸

### watermark
- **ç±»å‹**ï¼šbool
- **é»˜è®¤å€¼**ï¼šfalse
- **è¯´æ˜**ï¼šæ˜¯å¦æ·»åŠ æ°´å°

### negative_prompt
- **ç±»å‹**ï¼šstring
- **è¯´æ˜**ï¼šåå‘æç¤ºè¯ï¼Œæè¿°ä¸æƒ³è¦çš„å†…å®¹

## ğŸ”„ å“åº”æ ¼å¼

### å¼‚æ­¥æäº¤æˆåŠŸ
```json
{
  "output": {
    "task_status": "PENDING",
    "task_id": "0385dc79-5ff8-4d82-bcb6-xxxxxx"
  },
  "request_id": "4909100c-7b5a-9f92-bfe5-xxxxxx"
}
```

### ä»»åŠ¡å®Œæˆ
```json
{
  "output": {
    "task_id": "858cad55-4bdc-4ba3-ae6c-xxxxxx",
    "task_status": "SUCCEEDED",
    "finished": true,
    "choices": [
      {
        "finish_reason": "stop",
        "message": {
          "role": "assistant",
          "content": [
            {
              "image": "https://dashscope-result-bj.oss-cn-beijing.aliyuncs.com/xxx.png",
              "type": "image"
            }
          ]
        }
      }
    ]
  },
  "usage": {
    "size": "1280*1280",
    "image_count": 2
  }
}
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å‚è€ƒå›¾ç”Ÿå›¾
1. **é€‰æ‹©åˆé€‚çš„å‚è€ƒå›¾**
   - é£æ ¼æ˜ç¡®çš„å›¾ç‰‡æ•ˆæœæ›´å¥½
   - å‚è€ƒå›¾è´¨é‡å½±å“ç”Ÿæˆæ•ˆæœ

2. **æ¸…æ™°çš„æè¿°**
   ```
   å¥½çš„æç¤ºè¯ï¼š
   "å‚è€ƒè¿™ä¸ªæ°´å½©ç”»é£æ ¼ï¼Œç”Ÿæˆä¸€æœµç«ç‘°èŠ±"
   
   ä¸å¥½çš„æç¤ºè¯ï¼š
   "ç”Ÿæˆç«ç‘°"ï¼ˆæ²¡æœ‰è¯´æ˜å‚è€ƒä»€ä¹ˆï¼‰
   ```

### å›¾æ–‡æ··åˆè¾“å‡º
1. **é€‚ç”¨åœºæ™¯**
   - æ•™ç¨‹åˆ¶ä½œ
   - æ­¥éª¤è¯´æ˜
   - æµç¨‹å›¾è§£

2. **æç¤ºè¯å»ºè®®**
   ```
   "ç»™æˆ‘ä¸€ä¸ª5æ­¥åšè›‹ç³•çš„æ•™ç¨‹"
   "å±•ç¤ºå¦‚ä½•ç»„è£…å®¶å…·çš„æ­¥éª¤"
   "åˆ¶ä½œå’–å•¡çš„è¯¦ç»†æµç¨‹"
   ```

### å›¾åƒç¼–è¾‘
1. **å•å›¾ç¼–è¾‘**
   - é£æ ¼è½¬æ¢
   - ç»†èŠ‚ä¿®æ”¹
   - èƒŒæ™¯æ›¿æ¢

2. **å¤šå›¾èåˆ**
   - åˆæˆæ–°åœºæ™¯
   - å…ƒç´ ç»„åˆ
   - é£æ ¼è¿ç§»

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ¨¡å¼äº’æ–¥
- å›¾æ–‡æ··åˆæ¨¡å¼ï¼ˆ`enable_interleave=true`ï¼‰æ—¶ï¼š
  - åªèƒ½ä¼ å…¥ä¸€å¼ å›¾æˆ–ä¸ä¼ å›¾
  - `n` å›ºå®šä¸º1
  - `prompt_extend` ä¸ç”Ÿæ•ˆ

### 2. å‚æ•°é™åˆ¶
- `n` å‚æ•°æ ¹æ®æ¨¡å¼åŠ¨æ€é™åˆ¶
- å›¾æ–‡æ··åˆæ¨¡å¼ä¸‹ä½¿ç”¨ `max_images` æ§åˆ¶æ•°é‡

### 3. å¼‚æ­¥è°ƒç”¨
- éœ€è¦è½®è¯¢ä»»åŠ¡çŠ¶æ€
- ä½¿ç”¨ `X-DashScope-Async: enable` å¤´
- é€šè¿‡ task_id æŸ¥è¯¢ç»“æœ

## ğŸ”„ ä¸å…¶ä»–ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | 2.6 | 2.5 |
|------|-----|-----|
| å‚è€ƒå›¾ç”Ÿå›¾ | âœ… | âŒ |
| å›¾æ–‡æ··åˆ | âœ… | âŒ |
| å¤šå›¾ç¼–è¾‘ | âœ… | âœ… |
| è°ƒç”¨æ–¹å¼ | å¼‚æ­¥ | å¼‚æ­¥ |
| APIæ¥å£ | image-generation | image2image |
| è¯·æ±‚æ ¼å¼ | messages | prompt+images |

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. åœ¨åº”ç”¨ä¸­é€‰æ‹©"å›¾åƒç¼–è¾‘"åŠŸèƒ½
2. é€‰æ‹©"ğŸŒŸ wan2.6-imageï¼ˆæœ€æ–°ï¼‰"æ¨¡å‹
3. ä¸Šä¼ å‚è€ƒå›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
4. è¾“å…¥ç¼–è¾‘æç¤ºè¯
5. è®¾ç½®ç”Ÿæˆæ•°é‡
6. ç‚¹å‡»"å¼€å§‹ç¼–è¾‘"

---

**æ›´æ–°æ—¥æœŸ**ï¼š2025-12-16
**æ¨¡å‹ç‰ˆæœ¬**ï¼šwan2.6-image
