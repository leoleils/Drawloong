# 拖拽与浏览功能使用指南

## 📖 概述

本指南介绍 v1.3.0 新增的拖拽和文件浏览功能，让文件操作更加便捷高效。

## 🖼️ 图片浏览功能

### 打开图片查看器

**方式一：双击资源管理器中的图片**
1. 在左侧资源管理器中找到图片文件（带 🖼️ 图标）
2. 双击图片
3. 自动打开图片查看器

**方式二：从 inputs 文件夹双击**
- 双击 `inputs/` 文件夹中的图片
- 查看器打开后，图片会自动加载到上传区域
- 方便快速选择要处理的图片

### 图片查看器功能

#### 工具栏按钮
```
[文件名]          [100%] [🔍-] [⊡] [1:1] [🔍+]
```

- **🔍-** (缩小): 将图片缩小 25%
- **⊡** (适应窗口): 自动调整图片大小适应窗口
- **1:1** (实际大小): 显示图片原始尺寸
- **🔍+** (放大): 将图片放大 25%

#### 快捷键操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl` + `+` | 放大图片 |
| `Ctrl` + `-` | 缩小图片 |
| `Ctrl` + `0` | 适应窗口 |
| `Ctrl` + `1` | 实际大小 |
| `ESC` | 关闭查看器 |

#### 特性
- ✅ 高质量缩放（平滑变换）
- ✅ 显示当前缩放比例
- ✅ 自适应窗口大小
- ✅ 居中显示
- ✅ 支持滚动条（图片超出窗口时）

### 使用示例

**场景 1：预览图片质量**
```
1. 双击资源管理器中的图片
2. 使用 Ctrl+1 查看原始大小
3. 检查图片细节
4. 按 ESC 关闭
```

**场景 2：快速选择图片**
```
1. 双击 inputs 文件夹中的图片
2. 查看器中确认图片内容
3. 关闭查看器
4. 图片自动加载到上传区域
5. 直接配置参数生成视频
```

## 🎬 视频播放功能

### 播放视频

**操作方式：**
1. 在资源管理器中找到视频文件（带 🎬 图标）
2. 双击视频文件
3. 使用系统默认播放器打开

**支持格式：**
- MP4
- AVI
- MOV

**播放特点：**
- 使用系统默认播放器
- 支持所有播放器功能（暂停、快进、音量等）
- 不占用客户端内存
- 可以同时打开多个视频

### 使用示例

**场景 1：查看生成结果**
```
1. 视频生成完成后
2. 在 outputs 文件夹中双击视频
3. 使用系统播放器预览
4. 满意后可导出或继续生成
```

**场景 2：对比不同版本**
```
1. 双击第一个视频
2. 双击第二个视频
3. 在系统播放器中切换窗口对比
```

## 🔄 拖拽功能详解

### 1. 从资源管理器拖拽到上传区域

**操作步骤：**
1. 在资源管理器的 `inputs/` 文件夹中找到图片
2. 按住鼠标左键拖动图片
3. 拖到中间的上传区域
4. 松开鼠标
5. 图片自动加载

**效果：**
- 上传区域显示图片预览
- 状态栏显示 "已加载图片: xxx.jpg"
- "生成视频" 按钮变为可用

**提示：**
- 只能拖拽图片文件（🖼️ 图标）
- 视频文件无法拖拽到上传区域
- 支持拖拽工程内和工程外的图片

### 2. 从外部拖拽文件到资源管理器

**支持的文件类型：**

| 文件类型 | 扩展名 | 目标文件夹 |
|---------|--------|-----------|
| 图片 | .png, .jpg, .jpeg | inputs/ |
| 视频 | .mp4, .avi, .mov | outputs/ |

**操作步骤：**
1. 从系统文件管理器（Finder/资源管理器）中选择文件
2. 拖动到客户端的资源管理器区域
3. 松开鼠标
4. 系统自动判断文件类型
5. 复制到对应文件夹

**导入流程：**

```
┌─────────────────┐
│  选择外部文件    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  拖到资源管理器  │
└────────┬────────┘
         │
    ┌────┴────┐
    │ 判断类型 │
    └────┬────┘
         │
    ┌────┴────────┐
    │             │
    ▼             ▼
┌───────┐    ┌────────┐
│ 图片  │    │ 视频   │
│→inputs│    │→outputs│
└───────┘    └────────┘
```

**文件覆盖提示：**
- 如果文件已存在，会弹出确认对话框
- 可选择覆盖或取消
- 取消后不会导入文件

**成功提示：**
- 导入成功后显示 "文件已导入到工程"
- 资源管理器自动刷新
- 新文件立即显示

### 3. 从外部拖拽图片到上传区域

**操作步骤：**
1. 从系统文件管理器选择图片文件
2. 拖动到上传区域
3. 松开鼠标
4. 图片自动加载和预览

**拖拽状态提示：**

**未拖拽时：**
```
┌─────────────────────────┐
│                         │
│  拖拽图片到此处         │
│  或点击下方按钮选择     │
│                         │
└─────────────────────────┘
[灰色边框]
```

**拖拽进入时：**
```
┌─────────────────────────┐
│                         │
│  释放以上传图片         │
│                         │
│                         │
└─────────────────────────┘
[蓝色边框 + 高亮背景]
```

**拖拽离开时：**
```
恢复初始状态
```

**验证功能：**
- 自动检查文件大小（默认 ≤ 10MB）
- 自动检查文件格式（仅限图片）
- 不符合条件会显示警告

## 📝 使用场景示例

### 场景 1：整理外部素材

**目标：** 将桌面上的图片素材导入工程

**步骤：**
1. 打开工程
2. 打开系统文件管理器，找到桌面上的图片
3. 选中多张图片
4. 依次拖拽到资源管理器
5. 图片自动复制到 `inputs/` 文件夹
6. 在资源管理器中查看导入结果

### 场景 2：快速处理图片

**目标：** 从工程内选择图片并生成视频

**步骤：**
1. 在资源管理器 `inputs/` 文件夹中找到图片
2. 双击图片预览
3. 确认后关闭查看器（图片已自动加载）
4. 配置生成参数
5. 点击生成视频
6. 完成后在 `outputs/` 文件夹双击查看结果

### 场景 3：对比多个视频

**目标：** 对比不同参数生成的视频效果

**步骤：**
1. 在 `outputs/` 文件夹中找到多个视频
2. 双击第一个视频（模型A）
3. 双击第二个视频（模型B）
4. 在系统播放器中切换对比
5. 选择效果最好的版本

### 场景 4：批量导入素材

**目标：** 将客户提供的素材批量导入

**步骤：**
1. 客户发来的图片放在下载文件夹
2. 打开下载文件夹
3. 全选图片文件
4. 拖拽到资源管理器
5. 系统自动复制所有图片到 `inputs/`
6. 依次处理每张图片

## 💡 使用技巧

### 提高效率

1. **快速预览**
   - 双击查看完整图片
   - ESC 快速关闭
   - 无需打开外部软件

2. **拖拽批量导入**
   - 一次选择多个文件
   - 依次拖拽导入
   - 比逐个上传快得多

3. **工程内快速选择**
   - 双击 inputs 图片自动加载
   - 无需再次上传
   - 减少重复操作

4. **视频快速查看**
   - 双击直接播放
   - 无需下载到其他位置
   - 方便即时查看效果

### 避免常见错误

1. **文件格式**
   - ❌ 拖拽 PSD、AI 等设计文件
   - ✅ 先导出为 JPG/PNG

2. **文件大小**
   - ❌ 拖拽 20MB 的高清图片
   - ✅ 先压缩到 10MB 以内

3. **工程状态**
   - ❌ 未打开工程就拖拽到资源管理器
   - ✅ 先创建或打开工程

4. **目标位置**
   - ❌ 拖拽视频到上传区域
   - ✅ 只有图片可以拖拽到上传区域

## 🎯 快捷键参考

### 图片查看器

| Windows/Linux | macOS | 功能 |
|--------------|-------|------|
| `Ctrl` + `+` | `Cmd` + `+` | 放大 |
| `Ctrl` + `-` | `Cmd` + `-` | 缩小 |
| `Ctrl` + `0` | `Cmd` + `0` | 适应窗口 |
| `Ctrl` + `1` | `Cmd` + `1` | 实际大小 |
| `ESC` | `ESC` | 关闭 |

## ❓ 常见问题

### Q1: 为什么拖拽图片到资源管理器没反应？
**A:** 确保已经打开工程。只有打开工程后才能导入文件。

### Q2: 双击视频没有播放？
**A:** 检查系统是否安装了视频播放器。如果没有，请安装 VLC 或其他播放器。

### Q3: 图片查看器打开很慢？
**A:** 可能是图片太大。建议图片大小控制在 10MB 以内。

### Q4: 拖拽文件提示格式不支持？
**A:** 目前只支持：
- 图片：PNG、JPG、JPEG
- 视频：MP4、AVI、MOV

### Q5: 从资源管理器拖拽图片到上传区域失败？
**A:** 目前需要：
1. 先双击图片打开查看器
2. 关闭查看器（自动加载）
或者：
1. 直接从系统文件管理器拖拽

### Q6: 导入的文件在哪里？
**A:** 
- 图片文件 → `工程目录/inputs/`
- 视频文件 → `工程目录/outputs/`

## 🔍 故障排除

### 图片无法预览

**症状：** 双击图片后查看器显示 "无法加载图片"

**解决方法：**
1. 检查文件是否损坏
2. 尝试用系统图片查看器打开
3. 转换图片格式为 JPG

### 视频无法播放

**症状：** 双击视频无反应

**解决方法：**
1. 检查系统是否有默认播放器
2. macOS: 确保有 QuickTime 或 VLC
3. Windows: 确保有 Windows Media Player 或 VLC
4. Linux: 安装 VLC 或 mpv

### 拖拽无响应

**症状：** 拖拽文件到资源管理器没有任何反应

**解决方法：**
1. 确认已打开工程
2. 尝试先关闭再打开应用
3. 检查文件权限
4. 尝试复制粘贴方式导入

## 📚 相关文档

- [README](README.md) - 项目总览
- [工程管理指南](PROJECT_MANAGEMENT_GUIDE.md) - 工程管理详解
- [功能测试指南](FEATURE_TEST.md) - 完整测试步骤
- [更新日志](CHANGELOG.md) - 版本更新历史

---

**版本**: v1.3.0  
**更新日期**: 2025-12-11  

**祝您使用愉快！** 🎨✨
