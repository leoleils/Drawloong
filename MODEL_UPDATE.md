# 新增模型与智能参数切换功能

## 功能概述

新增万相2.5 Preview模型，支持5个模型选择，并实现了智能参数切换功能——选择不同模型时，分辨率和视频时长选项会自动更新为该模型支持的档位。

## 支持的模型

### 1. 万相2.5 Preview（有声视频）🆕

**模型标识：** `wan2.5-i2v-preview`

**核心特性：**
- ✅ **支持音频** - 自动配音或自定义音频文件
- ⚡ 24fps
- 🎬 MP4 (H.264编码)

**支持参数：**
```
分辨率：480P、720P、1080P
时  长：5秒、10秒
```

**适用场景：**
- 需要配音的产品宣传视频
- 有声动画制作
- 带解说的教学视频

---

### 2. 万相2.2 极速版（无声视频）

**模型标识：** `wan2.2-i2v-flash`

**核心特性：**
- ⚡ **速度提升50%** - 较2.1模型
- 🎯 30fps
- 🎬 MP4 (H.264编码)

**支持参数：**
```
分辨率：480P、720P、1080P
时  长：5秒
```

**适用场景：**
- 快速预览和测试
- 批量生成需求
- 时间敏感的项目

---

### 3. 万相2.2 专业版（无声视频）

**模型标识：** `wan2.2-i2v-plus`

**核心特性：**
- 🎯 **稳定性提升** - 成功率全面提升
- 🎯 30fps
- 🎬 MP4 (H.264编码)

**支持参数：**
```
分辨率：480P、720P、1080P
时  长：5秒
```

**适用场景：**
- 高质量视频生成
- 商业项目使用
- 要求稳定性的场景

---

### 4. 万相2.1 专业版（无声视频）

**模型标识：** `wanx2.1-i2v-plus`

**核心特性：**
- 📌 **稳定版本** - 经过验证
- 🎯 30fps
- 🎬 MP4 (H.264编码)

**支持参数：**
```
分辨率：720P（固定）
时  长：5秒
```

**适用场景：**
- 标准720P视频需求
- 兼容性优先
- 稳定可靠的生成

---

### 5. 万相2.1 极速版（无声视频）

**模型标识：** `wanx2.1-i2v-turbo`

**核心特性：**
- ⚡ **快速生成** - 高速处理
- 🎯 30fps
- 🎬 MP4 (H.264编码)

**支持参数：**
```
分辨率：480P、720P
时  长：3秒、4秒、5秒
```

**适用场景：**
- 快速原型制作
- 短视频生成
- 灵活时长需求

## 智能参数切换

### 工作原理

**选择模型 → 自动更新参数选项**

```
用户操作：选择"万相2.5 Preview"
  ↓
系统响应：
  - 分辨率选项 → 480P、720P、1080P
  - 时长选项   → 5秒、10秒
  - 模型说明   → 支持自动配音或自定义音频 | 24fps | 支持音频
```

### 参数保持逻辑

**场景 1：参数兼容**
```
当前选择：720P、5秒
切换到：万相2.2专业版
  ↓
保持选择：720P、5秒（因为新模型支持这些参数）
```

**场景 2：参数不兼容**
```
当前选择：1080P、10秒
切换到：万相2.1极速版
  ↓
自动调整：720P、5秒（切换到新模型的默认值）
```

## 界面展示

### 配置面板结构

```
┌─────────────────────────────────┐
│  生成配置                        │
├─────────────────────────────────┤
│  提示词:                         │
│  [文本输入框]                    │
├─────────────────────────────────┤
│  反向提示词:                     │
│  [文本输入框]                    │
├─────────────────────────────────┤
│  模型:                           │
│  [万相2.5 Preview（有声视频）▼] │
│  支持自动配音或自定义音频 |      │
│  24fps | 支持音频                │
├─────────────────────────────────┤
│  分辨率:                         │
│  [720P ▼]                       │
├─────────────────────────────────┤
│  视频时长:                       │
│  [5秒 ▼]                        │
├─────────────────────────────────┤
│  ☑ 启用提示词智能改写            │
├─────────────────────────────────┤
│  [  生成视频  ]                  │
└─────────────────────────────────┘
```

### 模型切换效果

#### 选择万相2.5 Preview
```
模型: 万相2.5 Preview（有声视频）
说明: 支持自动配音或自定义音频 | 24fps | 支持音频

分辨率: [480P] [720P] [1080P]
时  长: [5秒] [10秒]
```

#### 选择万相2.2极速版
```
模型: 万相2.2 极速版（无声视频）
说明: 较2.1模型速度提升50% | 30fps | 无声视频

分辨率: [480P] [720P] [1080P]
时  长: [5秒]
```

#### 选择万相2.1专业版
```
模型: 万相2.1 专业版（无声视频）
说明: 稳定版本 | 30fps | 无声视频

分辨率: [720P]
时  长: [5秒]
```

#### 选择万相2.1极速版
```
模型: 万相2.1 极速版（无声视频）
说明: 快速生成 | 30fps | 无声视频

分辨率: [480P] [720P]
时  长: [3秒] [4秒] [5秒]
```

## 技术实现

### 模型配置数据结构

```python
MODEL_CONFIG = {
    'wan2.5-i2v-preview': {
        'name': '万相2.5 Preview（有声视频）',
        'resolutions': ['480P', '720P', '1080P'],
        'durations': ['5秒', '10秒'],
        'fps': 24,
        'audio': True,
        'description': '支持自动配音或自定义音频'
    },
    'wan2.2-i2v-flash': {
        'name': '万相2.2 极速版（无声视频）',
        'resolutions': ['480P', '720P', '1080P'],
        'durations': ['5秒'],
        'fps': 30,
        'audio': False,
        'description': '较2.1模型速度提升50%'
    },
    # ... 其他模型
}
```

### 智能切换逻辑

```python
def on_model_changed(self, index):
    """模型改变事件"""
    model_key = self.model_combo.itemData(index)
    model_config = self.MODEL_CONFIG.get(model_key, {})
    
    # 1. 更新模型说明
    description = model_config.get('description', '')
    fps = model_config.get('fps', 30)
    audio = '支持音频' if model_config.get('audio', False) else '无声视频'
    self.model_desc_label.setText(f"{description} | {fps}fps | {audio}")
    
    # 2. 更新分辨率选项
    current_resolution = self.resolution_combo.currentText()
    available_resolutions = model_config.get('resolutions', ['720P'])
    
    self.resolution_combo.clear()
    self.resolution_combo.addItems(available_resolutions)
    
    # 保持之前的选择（如果兼容）
    if current_resolution in available_resolutions:
        self.resolution_combo.setCurrentText(current_resolution)
    
    # 3. 更新时长选项
    current_duration = self.duration_combo.currentText()
    available_durations = model_config.get('durations', ['5秒'])
    
    self.duration_combo.clear()
    self.duration_combo.addItems(available_durations)
    
    # 保持之前的选择（如果兼容）
    if current_duration in available_durations:
        self.duration_combo.setCurrentText(current_duration)
```

## 模型对比

### 按速度排序

| 排名 | 模型 | 相对速度 |
|-----|------|---------|
| 🥇 | 万相2.2极速版 | ⚡⚡⚡⚡⚡ (最快) |
| 🥈 | 万相2.1极速版 | ⚡⚡⚡⚡ |
| 🥉 | 万相2.2专业版 | ⚡⚡⚡ |
| 4 | 万相2.1专业版 | ⚡⚡ |
| 5 | 万相2.5 Preview | ⚡ (最慢，但支持音频) |

### 按功能排序

| 功能 | 万相2.5 | 万相2.2极速 | 万相2.2专业 | 万相2.1专业 | 万相2.1极速 |
|------|---------|------------|------------|------------|------------|
| 音频支持 | ✅ | ❌ | ❌ | ❌ | ❌ |
| 1080P | ✅ | ✅ | ✅ | ❌ | ❌ |
| 10秒视频 | ✅ | ❌ | ❌ | ❌ | ❌ |
| 3秒视频 | ❌ | ❌ | ❌ | ❌ | ✅ |
| 稳定性 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| 生成速度 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |

## 使用建议

### 场景推荐

**🎙️ 需要配音的视频**
```
推荐：万相2.5 Preview
优势：支持自动配音或自定义音频
适用：产品宣传、教学视频、有声动画
```

**⚡ 快速预览和测试**
```
推荐：万相2.2极速版
优势：速度提升50%，支持全分辨率
适用：快速迭代、批量生成
```

**🎯 高质量商业项目**
```
推荐：万相2.2专业版
优势：稳定性和成功率全面提升
适用：商业项目、重要作品
```

**📌 标准720P需求**
```
推荐：万相2.1专业版
优势：稳定可靠，经过验证
适用：标准分辨率，兼容性优先
```

**🎬 短视频快速生成**
```
推荐：万相2.1极速版
优势：支持3/4/5秒灵活时长
适用：短视频、GIF替代
```

## 完整工作流程

### 示例：生成有声产品宣传视频

```
1. 选择模型
   → 点击模型下拉框
   → 选择"万相2.5 Preview（有声视频）"
   → 自动显示：支持自动配音或自定义音频 | 24fps | 支持音频

2. 设置参数
   → 分辨率自动更新为：480P、720P、1080P
   → 时长自动更新为：5秒、10秒
   → 选择：1080P、10秒

3. 输入提示词
   → "展示产品的各个角度和功能特点"

4. 点击生成
   → 提交任务
   → 等待处理
   → 查看带音频的视频结果
```

## 注意事项

### 参数限制

**分辨率限制：**
- 万相2.1专业版只支持720P
- 其他模型至少支持480P、720P

**时长限制：**
- 只有万相2.5支持10秒
- 只有万相2.1极速版支持3秒、4秒

**音频支持：**
- 目前只有万相2.5支持音频
- 其他模型生成无声视频

### 性能建议

**追求速度：**
```
1. 万相2.2极速版（首选）
2. 万相2.1极速版
3. 选择较低分辨率（480P）
4. 选择较短时长
```

**追求质量：**
```
1. 万相2.2专业版（首选）
2. 万相2.1专业版
3. 选择高分辨率（1080P）
4. 启用提示词智能改写
```

**需要音频：**
```
1. 必选：万相2.5 Preview
2. 可选：准备自定义音频文件
3. 建议：选择较高分辨率和较长时长
```

## 未来规划

### 计划功能

- [ ] 自定义音频文件上传（万相2.5）
- [ ] 更多分辨率档位支持
- [ ] 更长时长选项（15秒、30秒）
- [ ] 更多模型版本支持
- [ ] 模型性能实时监控

---

**版本**: v1.5.1  
**更新日期**: 2025-12-12  
**新增模型**: 万相2.5 Preview（有声视频）

**享受更智能的模型选择体验！** 🚀✨
