# 通义千问 Edit Plus 模型更新

## 更新内容

### 新增模型
- **qwen-image-edit-plus（推荐）**: 最新的通义千问图像编辑模型
- 与 qwen-image-edit-plus-2025-10-30 能力相同
- 支持单图编辑和多图融合
- 可输出 1-6 张图片
- 支持自定义分辨率
- 支持提示词智能优化

### 功能特性

#### 模型能力对比
| 模型 | 输出数量 | 自定义分辨率 | 反向提示词 | 处理方式 | 特点 |
|------|----------|--------------|------------|----------|------|
| qwen-image-edit-plus | 1-6张 | ✅ | ✅ | 同步 | 推荐，最新功能 |
| qwen-image-edit-plus-2025-10-30 | 1-6张 | ❌ | ✅ | 同步 | 旧版本 |
| wan2.6-image | 1-6张 | ✅ | ❌ | 异步 | 支持图文混合 |
| wan2.5-i2i-preview | 1-6张 | ✅ | ❌ | 异步 | 稳定版本 |

#### 支持的分辨率
- 默认（不指定）
- 1:1 (1280×1280, 1024×1024)
- 2:3 (800×1200)
- 3:2 (1200×800)
- 3:4 (960×1280)
- 4:3 (1280×960)
- 9:16 (720×1280)
- 16:9 (1280×720)
- 21:9 (1344×576)

### 技术实现

#### UI 更新
1. **模型选择**: 将 qwen-image-edit-plus 标记为"推荐"
2. **动态界面**: 根据选择的模型显示/隐藏尺寸选择器
3. **智能提示**: 为新模型提供详细的功能说明

#### API 集成
1. **参数支持**: 为 qwen-image-edit-plus 添加 size 参数支持
2. **向后兼容**: 保持与旧模型的兼容性
3. **错误处理**: 统一的错误处理机制

### 使用指南

#### 推荐使用场景
- **单图编辑**: 选择 qwen-image-edit-plus，设置合适的输出尺寸
- **多图融合**: 选择 qwen-image-edit-plus，可生成多张不同效果的图片
- **批量生成**: 设置 n=4-6，一次生成多个变体

#### 最佳实践
1. **提示词优化**: 启用智能改写功能，提升生成效果
2. **尺寸选择**: 根据用途选择合适的宽高比
3. **反向提示词**: 使用反向提示词排除不需要的元素

### 更新文件
- `ui/image_edit_widget.py`: UI界面和模型配置
- `core/api_client.py`: API调用和参数处理

### 测试建议
1. 测试新模型的基本编辑功能
2. 验证自定义分辨率参数传递
3. 确认反向提示词功能正常
4. 测试1-6张图片的批量生成

---

**更新日期**: 2025-12-23  
**版本**: v1.17.1 (计划)  
**影响范围**: 图像编辑功能增强