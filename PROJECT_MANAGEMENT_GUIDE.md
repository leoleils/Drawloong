# 工程管理功能使用指南

## 📖 概述

QT 客户端现已支持完整的工程管理功能,可以像 VSCode 一样管理多个项目,让你的图片和视频资源组织得井井有条。

## 🎯 核心特性

### 1. 工程化管理
- ✅ 每个项目独立管理素材和任务
- ✅ 清晰的文件组织结构
- ✅ 自动保存和历史记录
- ✅ 最近使用项目快速访问

### 2. 自动文件组织
- ✅ 输入图片自动保存到 `inputs/` 文件夹
- ✅ 生成视频自动保存到 `outputs/` 文件夹
- ✅ 任务记录自动保存
- ✅ 资源管理器实时同步

### 3. 类 VSCode 界面
- ✅ 三栏式布局
- ✅ 文件树浏览器
- ✅ 可调整面板大小
- ✅ 欢迎页面引导

## 🚀 快速开始

### 第一次使用

#### 步骤 1: 启动应用
```bash
cd qt_client
python main.py
```

#### 步骤 2: 创建工程
1. 在欢迎页面点击 **"新建工程"** 按钮
2. 填写信息:
   - **工程名称**: 例如 "产品宣传视频"
   - **保存位置**: 选择一个文件夹
   - **描述** (可选): 例如 "Q4 产品宣传素材"
3. 点击 **"创建"**

#### 步骤 3: 上传图片
- 拖拽图片到上传区域
- 或点击 "选择图片" 按钮
- 图片会自动复制到工程的 `inputs/` 文件夹

#### 步骤 4: 生成视频
1. 输入提示词
2. 选择模型和分辨率
3. 点击 "生成视频"
4. 视频会自动保存到 `outputs/` 文件夹

### 日常使用

#### 打开已有工程

**方式一: 最近使用列表**
- 在欢迎页面点击最近使用的工程名称

**方式二: 浏览打开**
- 菜单 → 文件 → 打开工程 (Ctrl+O)
- 选择工程文件夹

#### 切换工程
1. 关闭当前工程: 菜单 → 文件 → 关闭工程
2. 选择或打开另一个工程

## 📁 工程结构说明

### 标准工程结构

```
我的工程/
├── inputs/              # 输入素材文件夹
│   ├── photo1.jpg      # 上传的图片
│   └── photo2.png      # 上传的图片
├── outputs/            # 输出结果文件夹
│   ├── task-xxx.mp4   # 生成的视频1
│   └── task-yyy.mp4   # 生成的视频2
├── project.json        # 工程配置文件
└── tasks.json         # 任务历史记录
```

### 文件说明

#### project.json - 工程配置
```json
{
  "name": "我的工程",
  "description": "工程描述信息",
  "created_at": "2025-12-11T12:00:00",
  "version": "1.0"
}
```

#### tasks.json - 任务记录
```json
[
  {
    "id": "task-abc123",
    "prompt": "美丽的风景",
    "model": "wanx2.1-t2v-turbo",
    "resolution": "1280*720",
    "status": "SUCCEEDED",
    "input_file": "/path/to/inputs/photo.jpg",
    "output_path": "/path/to/outputs/task-abc123.mp4",
    "created_at": "2025-12-11T12:10:00",
    "completed_at": "2025-12-11T12:15:00"
  }
]
```

## 🖥️ 界面布局详解

### 欢迎页面

```
┌──────────────────────────────────────┐
│                                      │
│        图生视频 QT 客户端            │
│                                      │
│   ┌──────────┐  ┌──────────┐       │
│   │ 新建工程 │  │ 打开工程 │       │
│   └──────────┘  └──────────┘       │
│                                      │
│   最近使用的工程:                    │
│   • 产品宣传视频 (/path/to/proj1)   │
│   • 测试项目 (/path/to/proj2)       │
│                                      │
└──────────────────────────────────────┘
```

### 工作区布局

```
┌────────┬─────────────────────┬──────────┐
│        │  [产品宣传视频]  ⚙  │          │
│ 资源   ├─────────────────────┤          │
│ 管理器 │                     │          │
│        │  上传图片区域        │          │
│ 📁工程 │  [拖拽图片到这里]    │          │
│  └inputs│                     │          │
│  └outputs                    │          │
│        │  配置面板            │          │
│        │  提示词: _______    │          │
│        │  模型: [选择]       │          │
│        │                     │          │
│        ├─────────────────────┤          │
│        │  任务列表            │          │
│        │  ┌─────────────┐   │          │
│        │  │task-1 ✓     │   │          │
│        │  │task-2 ⏳    │   │          │
│        │  └─────────────┘   │          │
└────────┴─────────────────────┴──────────┘
```

## 💡 使用技巧

### 提高工作效率

#### 1. 快捷键
- `Ctrl+Shift+N` - 新建工程
- `Ctrl+O` - 打开工程
- `Ctrl+,` - 打开设置

#### 2. 从资源管理器加载图片
- 双击 `inputs/` 文件夹中的图片
- 图片会自动加载到上传区域
- 无需重复上传

#### 3. 批量处理
1. 将多张图片复制到 `inputs/` 文件夹
2. 在资源管理器中依次点击图片
3. 为每张图片配置并生成视频

#### 4. 工程命名建议
- ✅ 使用有意义的名称: "2024春季产品宣传"
- ✅ 包含时间信息: "2024-Q1-营销视频"
- ✅ 按客户分类: "客户A-产品介绍"
- ❌ 避免: "项目1", "test", "新建文件夹"

### 文件管理最佳实践

#### 1. 定期整理
- 删除失败的任务记录
- 清理不需要的临时文件
- 导出重要视频到其他位置备份

#### 2. 工程备份
定期备份整个工程文件夹:
```bash
# 示例: 备份工程
cp -r "我的工程" "我的工程_备份_20251211"
```

#### 3. 磁盘空间管理
- 视频文件较大,注意磁盘空间
- 及时清理 `outputs/` 中的旧文件
- 考虑使用外部存储

## 🔍 常见问题解答

### Q1: 为什么必须先创建工程才能使用?
**A:** 工程管理帮助你组织文件,确保素材和成果不会散落各处,便于管理和追溯。

### Q2: 可以在不同电脑上使用同一个工程吗?
**A:** 可以。只需将整个工程文件夹复制到另一台电脑,然后打开即可。注意文件路径可能需要更新。

### Q3: 如何删除工程?
**A:** 目前需要手动删除工程文件夹。未来版本会添加工程删除功能。

### Q4: 可以重命名工程吗?
**A:** 目前需要手动编辑 `project.json` 文件中的 `name` 字段。未来版本会添加工程重命名功能。

### Q5: 最近使用列表能显示多少个工程?
**A:** 默认显示最近使用的 10 个工程。

### Q6: 工程配置文件损坏怎么办?
**A:** 
1. 检查 `project.json` 格式是否正确
2. 参考上面的示例格式修复
3. 或删除该文件,重新创建工程

### Q7: 任务历史记录可以清空吗?
**A:** 可以直接编辑或删除 `tasks.json` 文件,或在任务列表中逐个删除。

## 🎨 界面自定义

### 调整面板大小
- 拖动分割线调整资源管理器宽度
- 拖动上下分割线调整任务列表高度
- 设置会自动保存

### 刷新资源管理器
- 如果文件列表未自动更新
- 点击资源管理器的刷新按钮
- 或重新打开工程

## 📊 实际应用场景

### 场景 1: 产品宣传视频制作
```
工程: "2024春季新品宣传"
├── inputs/
│   ├── 产品图1.jpg
│   ├── 产品图2.jpg
│   └── 产品图3.jpg
└── outputs/
    ├── 宣传视频1.mp4
    ├── 宣传视频2.mp4
    └── 宣传视频3.mp4
```

### 场景 2: 客户定制内容
```
工程: "客户A-定制内容"
├── inputs/
│   └── 客户提供素材.jpg
└── outputs/
    ├── 方案1.mp4
    ├── 方案2.mp4
    └── 最终版.mp4
```

### 场景 3: 批量测试
```
工程: "模型效果测试"
├── inputs/
│   ├── 测试图1.jpg
│   ├── 测试图2.jpg
│   └── 测试图3.jpg
└── outputs/
    ├── 模型A结果.mp4
    ├── 模型B结果.mp4
    └── 模型C结果.mp4
```

## 🔄 工作流程建议

### 推荐工作流

```
1. 创建工程
   ↓
2. 准备素材 (上传图片到 inputs/)
   ↓
3. 配置参数
   ↓
4. 批量生成
   ↓
5. 查看结果 (在 outputs/ 中)
   ↓
6. 导出成果
   ↓
7. 归档工程
```

### 团队协作建议

1. **统一命名规范**
   - 工程名: `客户名-项目类型-日期`
   - 文件名: `素材类型-序号.扩展名`

2. **使用版本控制**
   - 为重要工程创建版本备份
   - 记录重要变更

3. **定期同步**
   - 使用网盘同步工程文件夹
   - 确保团队成员访问最新版本

## 📚 相关文档

- [功能测试指南](FEATURE_TEST.md) - 详细的功能测试步骤
- [更新日志](CHANGELOG.md) - 版本更新历史
- [设置指南](SETTINGS_GUIDE.md) - API 密钥配置说明
- [README](README.md) - 项目总体介绍

## 🆘 获取帮助

如果遇到问题:
1. 查看本文档的常见问题部分
2. 查看控制台输出的错误信息
3. 检查工程配置文件格式
4. 查看 CHANGELOG.md 了解已知问题

---

**祝你使用愉快! 🎉**
